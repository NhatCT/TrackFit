<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Dashboard</title>
  <th:block th:replace="base :: resources"></th:block>
</head>
<body>
<div th:replace="base :: header"></div>

<main class="container py-4">
  <h2 class="mb-4">Tổng quan hệ thống</h2>

  <div class="row g-3">
    <div class="col-md-3"><div class="card text-center"><div class="card-body">
      <div class="text-muted">Người dùng</div>
      <div class="fs-3" th:text="${usersCount}">0</div>
    </div></div></div>

    <div class="col-md-3"><div class="card text-center"><div class="card-body">
      <div class="text-muted">Bài tập</div>
      <div class="fs-3" th:text="${exercisesCount}">0</div>
    </div></div></div>

    <div class="col-md-3"><div class="card text-center"><div class="card-body">
      <div class="text-muted">Kế hoạch mẫu</div>
      <div class="fs-3" th:text="${templatePlansCount}">0</div>
    </div></div></div>

    <div class="col-md-3"><div class="card text-center"><div class="card-body">
      <div class="text-muted">Buổi tập hôm nay</div>
      <div class="fs-3" th:text="${todayWorkouts}">0</div>
    </div></div></div>
  </div>

  <div class="card mt-4">
    <div class="card-body">
      <h5 class="card-title">Hoàn thành buổi tập (7 ngày)</h5>
      <canvas id="sysChart" height="110"></canvas>
    </div>
  </div>
</main>

<div th:replace="base :: footer"></div>

<script th:inline="javascript">
/*<![CDATA[*/
const labels = /*[[${chartLabels}]]*/ [];
const data   = /*[[${chartData}]]*/ [];
new Chart(document.getElementById('sysChart'), {
  type: 'line',
  data: { labels, datasets: [{ label: 'Completed', data, fill: false }]},
  options: { scales: { y: { beginAtZero: true, ticks: { precision: 0 } } } }
});
/*]]>*/
</script>
</body>
</html>
